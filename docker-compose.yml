services:
  mcmanager:
    image: golang:1.24
    container_name: mcmanager
    env_file: .env
    working_dir: /app
    volumes:
      - .:/app
      - minecraft-data:/data
    command: [ "go", "run", "./cmd/manager" ]
    ports:
      - "${PORT:-8080}:8080"
    depends_on:
      - minecraft

  # Example Minecraft server service. Replace with your actual image/config.
  minecraft:
    image: itzg/minecraft-server:latest
    container_name: minecraft
    environment:
      EULA: "TRUE"
      RCON_PASSWORD: ${RCON_PASSWORD}
      RCON_PORT: ${RCON_PORT:-25575}
      ENABLE_RCON: "true"
    ports:
      - "25565:25565"
      - "${RCON_PORT:-25575}:${RCON_PORT:-25575}"
    volumes:
      - minecraft-data:/data

volumes:
  minecraft-data:
